function addinterfaces(){getchromeversion()>=44&&chrome.system.network.getNetworkInterfaces((function(e){if(e){var t=document.getElementById("choose-port").value;console.log("port found: "+t);var n=document.getElementById("local-interface");if(void 0!==n){for(;n.firstChild;)n.removeChild(n.firstChild);(c=document.createElement("a")).target="_blank";var r="http://127.0.0.1:"+t;c.innerText=r,c.href=r,n.appendChild(c)}else console.log("not contLocal!");var o=document.getElementById("other-interfaces");if(void 0!==o){for(;o.firstChild;)o.removeChild(o.firstChild);for(var i=0;i<e.length;i++)if(console.log("network interface:",e[i]),24==e[i].prefixLength){var c;(c=document.createElement("a")).target="_blank";r="http://"+e[i].address+":"+t;c.innerText=r,c.href=r,o.appendChild(c)}}else console.log("not cont!")}}))}window.reload=chrome.runtime.reload,chrome.runtime.getBackgroundPage((function(e){function t(t){if(t){window.entry=t,e.entry=t,e.haveentry(t);var n={retainstr:chrome.fileSystem.retainEntry(t)};chrome.storage.local.set(n),document.getElementById("curfolder").innerText=n.retainstr,document.getElementById("status").innerText="OK",console.log("set retainstr!")}}console.log("got bg page"),window.bg=e,document.getElementById("status").innerText="OK",addinterfaces(),document.getElementById("choose-folder").addEventListener("click",(function(){chrome.fileSystem.chooseEntry({type:"openDirectory"},t)})),document.getElementById("restart").addEventListener("click",(function(){var t=document.getElementById("choose-port");if(t){var n=t.value;console.log("port found: "+n),addinterfaces(),e&&e.restart(parseInt(n))}})),chrome.storage.local.get("retainstr",(function(t){t.retainstr&&(chrome.fileSystem.restoreEntry(t.retainstr,(function(t){t?(window.entry=t,e.entry=t,e.haveentry(t)):document.getElementById("status").innerText="DIRECTORY MISSING. CHOOSE AGAIN."})),document.getElementById("curfolder").innerText=t.retainstr)}))}));