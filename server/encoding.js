"undefined"!=typeof module&&module.exports&&(this["encoding-indexes"]=require("./encoding-indexes.js")["encoding-indexes"]),function(n){"use strict";function e(n,e,i){return e<=n&&n<=i}function i(n,e){return Math.floor(n/e)}function r(n){if(void 0===n)return{};if(n===Object(n))return n;throw TypeError("Could not convert argument to dictionary")}function t(n){this.tokens=[].slice.call(n)}t.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():-1},prepend:function(n){if(Array.isArray(n))for(var e=n;e.length;)this.tokens.unshift(e.pop());else this.tokens.unshift(n)},push:function(n){if(Array.isArray(n))for(var e=n;e.length;)this.tokens.push(e.shift());else this.tokens.push(n)}};function s(n,e){if(n)throw TypeError("Decoder error");return e||65533}function o(n){throw TypeError("The code point "+n+" could not be encoded.")}function u(n){return n=String(n).trim().toLowerCase(),Object.prototype.hasOwnProperty.call(l,n)?l[n]:null}var a=[{encodings:[{labels:["unicode-1-1-utf-8","utf-8","utf8"],name:"utf-8"}],heading:"The Encoding"},{encodings:[{labels:["866","cp866","csibm866","ibm866"],name:"ibm866"},{labels:["csisolatin2","iso-8859-2","iso-ir-101","iso8859-2","iso88592","iso_8859-2","iso_8859-2:1987","l2","latin2"],name:"iso-8859-2"},{labels:["csisolatin3","iso-8859-3","iso-ir-109","iso8859-3","iso88593","iso_8859-3","iso_8859-3:1988","l3","latin3"],name:"iso-8859-3"},{labels:["csisolatin4","iso-8859-4","iso-ir-110","iso8859-4","iso88594","iso_8859-4","iso_8859-4:1988","l4","latin4"],name:"iso-8859-4"},{labels:["csisolatincyrillic","cyrillic","iso-8859-5","iso-ir-144","iso8859-5","iso88595","iso_8859-5","iso_8859-5:1988"],name:"iso-8859-5"},{labels:["arabic","asmo-708","csiso88596e","csiso88596i","csisolatinarabic","ecma-114","iso-8859-6","iso-8859-6-e","iso-8859-6-i","iso-ir-127","iso8859-6","iso88596","iso_8859-6","iso_8859-6:1987"],name:"iso-8859-6"},{labels:["csisolatingreek","ecma-118","elot_928","greek","greek8","iso-8859-7","iso-ir-126","iso8859-7","iso88597","iso_8859-7","iso_8859-7:1987","sun_eu_greek"],name:"iso-8859-7"},{labels:["csiso88598e","csisolatinhebrew","hebrew","iso-8859-8","iso-8859-8-e","iso-ir-138","iso8859-8","iso88598","iso_8859-8","iso_8859-8:1988","visual"],name:"iso-8859-8"},{labels:["csiso88598i","iso-8859-8-i","logical"],name:"iso-8859-8-i"},{labels:["csisolatin6","iso-8859-10","iso-ir-157","iso8859-10","iso885910","l6","latin6"],name:"iso-8859-10"},{labels:["iso-8859-13","iso8859-13","iso885913"],name:"iso-8859-13"},{labels:["iso-8859-14","iso8859-14","iso885914"],name:"iso-8859-14"},{labels:["csisolatin9","iso-8859-15","iso8859-15","iso885915","iso_8859-15","l9"],name:"iso-8859-15"},{labels:["iso-8859-16"],name:"iso-8859-16"},{labels:["cskoi8r","koi","koi8","koi8-r","koi8_r"],name:"koi8-r"},{labels:["koi8-u"],name:"koi8-u"},{labels:["csmacintosh","mac","macintosh","x-mac-roman"],name:"macintosh"},{labels:["dos-874","iso-8859-11","iso8859-11","iso885911","tis-620","windows-874"],name:"windows-874"},{labels:["cp1250","windows-1250","x-cp1250"],name:"windows-1250"},{labels:["cp1251","windows-1251","x-cp1251"],name:"windows-1251"},{labels:["ansi_x3.4-1968","ascii","cp1252","cp819","csisolatin1","ibm819","iso-8859-1","iso-ir-100","iso8859-1","iso88591","iso_8859-1","iso_8859-1:1987","l1","latin1","us-ascii","windows-1252","x-cp1252"],name:"windows-1252"},{labels:["cp1253","windows-1253","x-cp1253"],name:"windows-1253"},{labels:["cp1254","csisolatin5","iso-8859-9","iso-ir-148","iso8859-9","iso88599","iso_8859-9","iso_8859-9:1989","l5","latin5","windows-1254","x-cp1254"],name:"windows-1254"},{labels:["cp1255","windows-1255","x-cp1255"],name:"windows-1255"},{labels:["cp1256","windows-1256","x-cp1256"],name:"windows-1256"},{labels:["cp1257","windows-1257","x-cp1257"],name:"windows-1257"},{labels:["cp1258","windows-1258","x-cp1258"],name:"windows-1258"},{labels:["x-mac-cyrillic","x-mac-ukrainian"],name:"x-mac-cyrillic"}],heading:"Legacy single-byte encodings"},{encodings:[{labels:["chinese","csgb2312","csiso58gb231280","gb2312","gb_2312","gb_2312-80","gbk","iso-ir-58","x-gbk"],name:"gbk"},{labels:["gb18030"],name:"gb18030"}],heading:"Legacy multi-byte Chinese (simplified) encodings"},{encodings:[{labels:["big5","big5-hkscs","cn-big5","csbig5","x-x-big5"],name:"big5"}],heading:"Legacy multi-byte Chinese (traditional) encodings"},{encodings:[{labels:["cseucpkdfmtjapanese","euc-jp","x-euc-jp"],name:"euc-jp"},{labels:["csiso2022jp","iso-2022-jp"],name:"iso-2022-jp"},{labels:["csshiftjis","ms_kanji","shift-jis","shift_jis","sjis","windows-31j","x-sjis"],name:"shift_jis"}],heading:"Legacy multi-byte Japanese encodings"},{encodings:[{labels:["cseuckr","csksc56011987","euc-kr","iso-ir-149","korean","ks_c_5601-1987","ks_c_5601-1989","ksc5601","ksc_5601","windows-949"],name:"euc-kr"}],heading:"Legacy multi-byte Korean encodings"},{encodings:[{labels:["csiso2022kr","hz-gb-2312","iso-2022-cn","iso-2022-cn-ext","iso-2022-kr"],name:"replacement"},{labels:["utf-16be"],name:"utf-16be"},{labels:["utf-16","utf-16le"],name:"utf-16le"},{labels:["x-user-defined"],name:"x-user-defined"}],heading:"Legacy miscellaneous encodings"}],l={};a.forEach((function(n){n.encodings.forEach((function(n){n.labels.forEach((function(e){l[e]=n}))}))}));var c={},f={};function d(n,e){return e&&e[n]||null}function h(n,e){var i=e.indexOf(n);return-1===i?null:i}function g(e){if(!("encoding-indexes"in n))throw Error("Indexes missing. Did you forget to include encoding-indexes.js?");return n["encoding-indexes"][e]}function p(n,e){if(!(this instanceof p))return new p(n,e);if(n=void 0!==n?String(n):"utf-8",e=r(e),this._encoding=u(n),null===this._encoding||"replacement"===this._encoding.name)throw RangeError("Unknown encoding: "+n);if(!f[this._encoding.name])throw Error("Decoder not present. Did you forget to include encoding-indexes.js?");return this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=Boolean(e.fatal),this._ignoreBOM=Boolean(e.ignoreBOM),Object.defineProperty?(Object.defineProperty(this,"encoding",{value:this._encoding.name}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})):(this.encoding=this._encoding.name,this.fatal=this._fatal,this.ignoreBOM=this._ignoreBOM),this}function b(n,e){if(!(this instanceof b))return new b(n,e);if(n=void 0!==n?String(n):"utf-8",e=r(e),this._encoding=u(n),null===this._encoding||"replacement"===this._encoding.name)throw RangeError("Unknown encoding: "+n);var i=Boolean(e.NONSTANDARD_allowLegacyEncoding),t="utf-8"!==this._encoding.name&&"utf-16le"!==this._encoding.name&&"utf-16be"!==this._encoding.name;if(null===this._encoding||t&&!i)throw RangeError("Unknown encoding: "+n);if(!c[this._encoding.name])throw Error("Encoder not present. Did you forget to include encoding-indexes.js?");return this._streaming=!1,this._encoder=null,this._options={fatal:Boolean(e.fatal)},Object.defineProperty?Object.defineProperty(this,"encoding",{value:this._encoding.name}):this.encoding=this._encoding.name,this}function m(n){var i=n.fatal,r=0,t=0,o=0,u=128,a=191;this.handler=function(n,l){if(-1===l&&0!==o)return o=0,s(i);if(-1===l)return-1;if(0===o){if(e(l,0,127))return l;if(e(l,194,223))o=1,r=l-192;else if(e(l,224,239))224===l&&(u=160),237===l&&(a=159),o=2,r=l-224;else{if(!e(l,240,244))return s(i);240===l&&(u=144),244===l&&(a=143),o=3,r=l-240}return r<<=6*o,null}if(!e(l,u,a))return r=o=t=0,u=128,a=191,n.prepend(l),s(i);if(u=128,a=191,r+=l-128<<6*(o-(t+=1)),t!==o)return null;var c=r;return r=o=t=0,c}}function w(n){n.fatal;this.handler=function(n,i){if(-1===i)return-1;if(e(i,0,127))return i;var r,t;e(i,128,2047)?(r=1,t=192):e(i,2048,65535)?(r=2,t=224):e(i,65536,1114111)&&(r=3,t=240);for(var s=[(i>>6*r)+t];r>0;){var o=i>>6*(r-1);s.push(128|63&o),r-=1}return s}}function _(n,i){var r=i.fatal;this.handler=function(i,t){if(-1===t)return-1;if(e(t,0,127))return t;var o=n[t-128];return null===o?s(r):o}}function v(n,i){i.fatal;this.handler=function(i,r){if(-1===r)return-1;if(e(r,0,127))return r;var t=h(r,n);return null===t&&o(r),t+128}}function y(n){var i=n.fatal,r=0,t=0,o=0;this.handler=function(n,u){if(-1===u&&0===r&&0===t&&0===o)return-1;var a;if(-1!==u||0===r&&0===t&&0===o||(r=0,t=0,o=0,s(i)),0!==o){a=null,e(u,48,57)&&(a=function(n){if(n>39419&&n<189e3||n>1237575)return null;var e,i=0,r=0,t=g("gb18030");for(e=0;e<t.length;++e){var s=t[e];if(!(s[0]<=n))break;i=s[0],r=s[1]}return r+n-i}(10*(126*(10*(r-129)+(t-48))+(o-129))+u-48));var l=[t,o,u];return r=0,t=0,o=0,null===a?(n.prepend(l),s(i)):a}if(0!==t)return e(u,129,254)?(o=u,null):(n.prepend([t,u]),r=0,t=0,s(i));if(0!==r){if(e(u,48,57))return t=u,null;var c=r,f=null;r=0;var h=u<127?64:65;return(e(u,64,126)||e(u,128,254))&&(f=190*(c-129)+(u-h)),a=null===f?null:d(f,g("gb18030")),null===f&&n.prepend(u),null===a?s(i):a}return e(u,0,127)?u:128===u?8364:e(u,129,254)?(r=u,null):s(i)}}function k(n,r){n.fatal;this.handler=function(n,t){if(-1===t)return-1;if(e(t,0,127))return t;if(r&&8364===t)return 128;var s=h(t,g("gb18030"));if(null!==s){var u=s%190;return[i(s,190)+129,u+(u<63?64:65)]}if(r)return o(t);var a=i(i(i(s=function(n){var e,i=0,r=0,t=g("gb18030");for(e=0;e<t.length;++e){var s=t[e];if(!(s[1]<=n))break;i=s[1],r=s[0]}return r+n-i}(t),10),126),10),l=i(i(s-=10*a*126*10,10),126),c=i(s-=10*l*126,10);return[a+129,l+48,c+129,s-10*c+48]}}function j(n){var i=n.fatal,r=0;this.handler=function(n,t){if(-1===t&&0!==r)return r=0,s(i);if(-1===t&&0===r)return-1;if(0!==r){var o=r,u=null;r=0;var a=t<127?64:98;switch((e(t,64,126)||e(t,161,254))&&(u=157*(o-129)+(t-a)),u){case 1133:return[202,772];case 1135:return[202,780];case 1164:return[234,772];case 1166:return[234,780]}var l=null===u?null:d(u,g("big5"));return null===u&&n.prepend(t),null===l?s(i):l}return e(t,0,127)?t:e(t,129,254)?(r=t,null):s(i)}}function x(n){n.fatal;this.handler=function(n,r){if(-1===r)return-1;if(e(r,0,127))return r;var t=h(r,g("big5"));if(null===t)return o(r);var s=i(t,157)+129;if(s<161)return o(r);var u=t%157;return[s,u+(u<63?64:98)]}}function O(n){var i=n.fatal,r=!1,t=0;this.handler=function(n,o){if(-1===o&&0!==t)return t=0,s(i);if(-1===o&&0===t)return-1;if(142===t&&e(o,161,223))return t=0,65377+o-161;if(143===t&&e(o,161,254))return r=!0,t=o,null;if(0!==t){var u=t;t=0;var a=null;return e(u,161,254)&&e(o,161,254)&&(a=d(94*(u-161)+(o-161),g(r?"jis0212":"jis0208"))),r=!1,e(o,161,254)||n.prepend(o),null===a?s(i):a}return e(o,0,127)?o:142===o||143===o||e(o,161,254)?(t=o,null):s(i)}}function A(n){n.fatal;this.handler=function(n,r){if(-1===r)return-1;if(e(r,0,127))return r;if(165===r)return 92;if(8254===r)return 126;if(e(r,65377,65439))return[142,r-65377+161];var t=h(r,g("jis0208"));return null===t?o(r):[i(t,94)+161,t%94+161]}}function B(n){var i=n.fatal,r=0,t=1,o=2,u=3,a=4,l=5,c=6,f=r,h=r,p=0,b=!1;this.handler=function(n,m){switch(f){default:case r:return 27===m?(f=l,null):e(m,0,127)&&14!==m&&15!==m&&27!==m?(b=!1,m):-1===m?-1:(b=!1,s(i));case t:return 27===m?(f=l,null):92===m?(b=!1,165):126===m?(b=!1,8254):e(m,0,127)&&14!==m&&15!==m&&27!==m&&92!==m&&126!==m?(b=!1,m):-1===m?-1:(b=!1,s(i));case o:return 27===m?(f=l,null):e(m,33,95)?(b=!1,65377+m-33):-1===m?-1:(b=!1,s(i));case u:return 27===m?(f=l,null):e(m,33,126)?(b=!1,p=m,f=a,null):-1===m?-1:(b=!1,s(i));case a:if(27===m)return f=l,s(i);if(e(m,33,126)){f=u;var w=d(94*(p-33)+m-33,g("jis0208"));return null===w?s(i):w}return-1===m?(f=u,n.prepend(m),s(i)):(f=u,s(i));case l:return 36===m||40===m?(p=m,f=c,null):(n.prepend(m),b=!1,f=h,s(i));case c:var _=p;p=0;var v=null;if(40===_&&66===m&&(v=r),40===_&&74===m&&(v=t),40===_&&73===m&&(v=o),36!==_||64!==m&&66!==m||(v=u),null!==v){f=f=v;var y=b;return b=!0,y?s(i):null}return n.prepend([_,m]),b=!1,f=h,s(i)}}}function E(n){n.fatal;var r=0,t=1,s=2,u=r;this.handler=function(n,a){if(-1===a&&u!==r)return n.prepend(a),[27,40,66];if(-1===a&&u===r)return-1;if(u===r&&e(a,0,127))return a;if(u===t&&e(a,0,127)&&92!==a&&126!==a){if(e(a,0,127))return a;if(165===a)return 92;if(8254===a)return 126}if(e(a,0,127)&&u!==r)return n.prepend(a),u=r,[27,40,66];if((165===a||8254===a)&&u!==t)return n.prepend(a),u=t,[27,40,74];var l=h(a,g("jis0208"));return null===l?o(a):u!==s?(n.prepend(a),u=s,[27,36,66]):[i(l,94)+33,l%94+33]}}function M(n){var i=n.fatal,r=0;this.handler=function(n,t){if(-1===t&&0!==r)return r=0,s(i);if(-1===t&&0===r)return-1;if(0!==r){var o=r,u=null;r=0;var a=t<127?64:65,l=o<160?129:193;(e(t,64,126)||e(t,128,252))&&(u=188*(o-l)+t-a);var c=null===u?null:d(u,g("jis0208"));return null===c&&null!==u&&e(u,8836,10528)?57344+u-8836:(null===u&&n.prepend(t),null===c?s(i):c)}return e(t,0,128)?t:e(t,161,223)?65377+t-161:e(t,129,159)||e(t,224,252)?(r=t,null):s(i)}}function S(n){n.fatal;this.handler=function(n,r){if(-1===r)return-1;if(e(r,0,128))return r;if(165===r)return 92;if(8254===r)return 126;if(e(r,65377,65439))return r-65377+161;var t=function(n){var i=h(n,g("jis0208"));return null===i||e(i,8272,8835)?null:i}(r);if(null===t)return o(r);var s=i(t,188),u=t%188;return[s+(s<31?129:193),u+(u<63?64:65)]}}function C(n){var i=n.fatal,r=0;this.handler=function(n,t){if(-1===t&&0!==r)return r=0,s(i);if(-1===t&&0===r)return-1;if(0!==r){var o=r,u=null;r=0,e(t,65,254)&&(u=190*(o-129)+(t-65));var a=null===u?null:d(u,g("euc-kr"));return null===u&&e(t,0,127)&&n.prepend(t),null===a?s(i):a}return e(t,0,127)?t:e(t,129,254)?(r=t,null):s(i)}}function L(n){n.fatal;this.handler=function(n,r){if(-1===r)return-1;if(e(r,0,127))return r;var t=h(r,g("euc-kr"));return null===t?o(r):[i(t,190)+129,t%190+65]}}function T(n,e){var i=n>>8,r=255&n;return e?[i,r]:[r,i]}function D(n,i){var r=i.fatal,t=null,o=null;this.handler=function(i,u){if(-1===u&&(null!==t||null!==o))return s(r);if(-1===u&&null===t&&null===o)return-1;if(null===t)return t=u,null;var a;if(a=n?(t<<8)+u:(u<<8)+t,t=null,null!==o){var l=o;return o=null,e(a,56320,57343)?65536+1024*(l-55296)+(a-56320):(i.prepend(T(a,n)),s(r))}return e(a,55296,56319)?(o=a,null):e(a,56320,57343)?s(r):a}}function P(n,i){i.fatal;this.handler=function(i,r){if(-1===r)return-1;if(e(r,0,65535))return T(r,n);var t=T(55296+(r-65536>>10),n),s=T(56320+(r-65536&1023),n);return t.concat(s)}}function U(n){n.fatal;this.handler=function(n,i){return-1===i?-1:e(i,0,127)?i:63360+i-128}}function R(n){n.fatal;this.handler=function(n,i){return-1===i?-1:e(i,0,127)?i:e(i,63360,63487)?i-63360+128:o(i)}}p.prototype={decode:function(n,e){var i;i="object"==typeof n&&n instanceof ArrayBuffer?new Uint8Array(n):"object"==typeof n&&"buffer"in n&&n.buffer instanceof ArrayBuffer?new Uint8Array(n.buffer,n.byteOffset,n.byteLength):new Uint8Array(0),e=r(e),this._streaming||(this._decoder=f[this._encoding.name]({fatal:this._fatal}),this._BOMseen=!1),this._streaming=Boolean(e.stream);for(var s,o=new t(i),u=[];!o.endOfStream()&&-1!==(s=this._decoder.handler(o,o.read()));)null!==s&&(Array.isArray(s)?u.push.apply(u,s):u.push(s));if(!this._streaming){do{if(-1===(s=this._decoder.handler(o,o.read())))break;null!==s&&(Array.isArray(s)?u.push.apply(u,s):u.push(s))}while(!o.endOfStream());this._decoder=null}return u.length&&(-1===["utf-8","utf-16le","utf-16be"].indexOf(this.encoding)||this._ignoreBOM||this._BOMseen||(65279===u[0]?(this._BOMseen=!0,u.shift()):this._BOMseen=!0)),function(n){for(var e="",i=0;i<n.length;++i){var r=n[i];r<=65535?e+=String.fromCharCode(r):(r-=65536,e+=String.fromCharCode(55296+(r>>10),56320+(1023&r)))}return e}(u)}},b.prototype={encode:function(n,e){n=n?String(n):"",e=r(e),this._streaming||(this._encoder=c[this._encoding.name](this._options)),this._streaming=Boolean(e.stream);for(var i,s=[],o=new t(function(n){for(var e=String(n),i=e.length,r=0,t=[];r<i;){var s=e.charCodeAt(r);if(s<55296||s>57343)t.push(s);else if(56320<=s&&s<=57343)t.push(65533);else if(55296<=s&&s<=56319)if(r===i-1)t.push(65533);else{var o=n.charCodeAt(r+1);if(56320<=o&&o<=57343){var u=1023&s,a=1023&o;t.push(65536+(u<<10)+a),r+=1}else t.push(65533)}r+=1}return t}(n));!o.endOfStream()&&-1!==(i=this._encoder.handler(o,o.read()));)Array.isArray(i)?s.push.apply(s,i):s.push(i);if(!this._streaming){for(;-1!==(i=this._encoder.handler(o,o.read()));)Array.isArray(i)?s.push.apply(s,i):s.push(i);this._encoder=null}return new Uint8Array(s)}},c["utf-8"]=function(n){return new w(n)},f["utf-8"]=function(n){return new m(n)},"encoding-indexes"in n&&a.forEach((function(n){"Legacy single-byte encodings"===n.heading&&n.encodings.forEach((function(n){var e=n.name,i=g(e);f[e]=function(n){return new _(i,n)},c[e]=function(n){return new v(i,n)}}))})),f.gbk=function(n){return new y(n)},c.gbk=function(n){return new k(n,!0)},c.gb18030=function(n){return new k(n)},f.gb18030=function(n){return new y(n)},c.big5=function(n){return new x(n)},f.big5=function(n){return new j(n)},c["euc-jp"]=function(n){return new A(n)},f["euc-jp"]=function(n){return new O(n)},c["iso-2022-jp"]=function(n){return new E(n)},f["iso-2022-jp"]=function(n){return new B(n)},c.shift_jis=function(n){return new S(n)},f.shift_jis=function(n){return new M(n)},c["euc-kr"]=function(n){return new L(n)},f["euc-kr"]=function(n){return new C(n)},c["utf-16be"]=function(n){return new P(!0,n)},f["utf-16be"]=function(n){return new D(!0,n)},c["utf-16le"]=function(n){return new P(!1,n)},f["utf-16le"]=function(n){return new D(!1,n)},c["x-user-defined"]=function(n){return new R(n)},f["x-user-defined"]=function(n){return new U(n)},"TextEncoder"in n||(n.TextEncoder=b),"TextDecoder"in n||(n.TextDecoder=p)}(this);